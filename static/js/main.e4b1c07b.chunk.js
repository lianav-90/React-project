(this["webpackJsonpreact-homework-4"]=this["webpackJsonpreact-homework-4"]||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),o=n.n(c),l=n(2),s=(n(15),function(e){var t=e.posts;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{className:"card",key:e.id},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text"},"Some text")))})))});var i=function(e){var t=e.bloggers;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{className:"card",key:e.id},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.lastname)))})))},u=n(1),m=n(3),p="https://it-blog-posts.herokuapp.com/api/",f="people/",b="people/login",h=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,[{key:"login",value:function(e){return fetch("".concat(p).concat(b),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},{key:"get",value:function(){return fetch("".concat(p).concat(f),{method:"GET"})}},{key:"getUser",value:function(e){return fetch("".concat(p).concat(f).concat(e),{method:"GET",headers:{"Content-Type":"application/json"}})}},{key:"register",value:function(e){return fetch("".concat(p).concat(f),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){if(200===e.status||201===e.status)return e.json();console.log("Email or Password is incorrect")})).then((function(e){return e}))}}]),e}(),d=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,[{key:"get",value:function(){return fetch("".concat(p).concat("posts"))}},{key:"getUserPosts",value:function(e){return fetch("".concat(p,"people/").concat(e,"/").concat("posts"))}}]),e}(),g=new function e(){Object(u.a)(this,e),this.people=new h,this.posts=new d};var v=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),u=Object(l.a)(o,2),m=u[0],p=u[1];return Object(a.useEffect)((function(){g.people.get().then((function(e){return e.json()})).then((function(e){return c(e)})),g.posts.get().then((function(e){return e.json()})).then((function(e){return p(e)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement(i,{bloggers:n})),r.a.createElement("div",{className:"col-9"},r.a.createElement(s,{posts:m}))))},E=function(e){var t=e.clickFunction;e.tab1;return r.a.createElement("div",{className:"container-fluid top"},r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{onClick:t.bind(null,"Home"),className:"nav-link"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{onClick:t.bind(null,"Login"),className:"nav-link"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{onClick:t.bind(null,"Registration"),className:"nav-link"},"Registration"))))},O=n(4),j=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,null,[{key:"set",value:function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(a){throw new Error(a.message)}}},{key:"get",value:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)||null}catch(n){throw new Error(n.message)}}},{key:"remove",value:function(e){try{localStorage.removeItem(e)}catch(t){throw new Error(t.message)}}}]),e}();function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var w=function(e){var t=e.onTabChange,n=Object(a.useState)({email:"",password:""}),c=Object(l.a)(n,2),o=c[0],s=c[1],i=function(e){var t=e.target,n=t.name,a=t.value;s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,Object(O.a)({},n,a)))};return r.a.createElement("div",{className:"login"},r.a.createElement("h3",null,"Login"),r.a.createElement("div",null,r.a.createElement("input",{onChange:i,name:"email",type:"text",placeholder:"Email"})),r.a.createElement("div",null,r.a.createElement("input",{onChange:i,name:"password",type:"password",placeholder:"Password"})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return function(e){e.email&&e.password?g.people.login(e).then((function(e){if(!e.ok)throw alert("WRONG EMAIL or PASSWORD"),new Error;return e.json()})).then((function(e){j.set("user",e.userId),t("Workspace")})):alert("Empty fields!!!")}(o)}},"Sign in")))},k=n(8),N=n(7),S=n(9),P=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(k.a)(this,Object(N.a)(t).call(this,e))).userId=j.get("user"),n.state={userData:{lastname:"",username:"",email:""},posts:[]},n}return Object(S.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.people.getUser(this.userId).then((function(t){return t.json().then((function(t){e.setState({userData:t})}))})),g.posts.getUserPosts(this.userId).then((function(e){return e.json()})).then((function(t){return e.setState({posts:t})}))}},{key:"render",value:function(){var e=this.state.posts;return r.a.createElement("div",{className:"container"},r.a.createElement("button",null,"Create new post"),r.a.createElement("div",null,r.a.createElement(s,{posts:e})))}}]),t}(a.Component);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var T=function(e){var t=e.onTabChange,n=Object(a.useState)({username:"",lastname:"",email:"",password:""}),c=Object(l.a)(n,2),o=c[0],s=c[1],i=function(e){var t=e.target,n=t.name,a=t.value;s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,Object(O.a)({},n,a)))};return r.a.createElement("div",{className:"container register"},r.a.createElement("h3",null,"Register"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"username",onChange:i,placeholder:"Firstname"})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"lastname",onChange:i,placeholder:"Lastname"})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"email",onChange:i,placeholder:"Email"})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",name:"password",onChange:i,placeholder:"Password"})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){console.log(o),o.lastname&&o.username&&o.email&&o.password?g.people.register(o).then((function(e){e.ok||console.log(e)})).then((function(e){console.log(o),t("Login")})):alert("Empty fields!!!")}},"Sign up")))};n(16);var D=function(){var e=Object(a.useState)({bar:"Home"}),t=Object(l.a)(e,2),n=t[0],c=t[1],o=function(e){c({bar:e})};return r.a.createElement("div",{className:"App"},r.a.createElement(E,{clickFunction:o,tab1:n.bar}),"Home"===n.bar&&r.a.createElement(v,{onTabChange:o}),"Login"===n.bar&&r.a.createElement(w,{onTabChange:o}),"Registration"===n.bar&&r.a.createElement(T,{onTabChange:o}),"Workspace"===n.bar&&r.a.createElement(P,{onTabChange:o}))};o.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.e4b1c07b.chunk.js.map