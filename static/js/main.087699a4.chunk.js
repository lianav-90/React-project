(this["webpackJsonpreact-homework-4"]=this["webpackJsonpreact-homework-4"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),o=n.n(c),l=n(1),i=(n(12),function(e){var t=e.posts,n=e.buttonOpen,a=e.handleRemove,c=e.handleUpdate;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{className:"card",key:e.id},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text"},e.description),n&&r.a.createElement("button",{className:"postbutton",onClick:c.bind(null,e.id)},"Update"),n&&r.a.createElement("button",{className:"postbutton",onClick:a.bind(null,e.id)},"Remove")))})))});var s=function(e){var t=e.bloggers;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{className:"card",key:e.id},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.lastname)))})))},u=n(3),m=n(4),p="https://it-blog-posts.herokuapp.com/api/",d="people/",b="people/login",f=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,[{key:"login",value:function(e){return fetch("".concat(p).concat(b),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},{key:"get",value:function(){return fetch("".concat(p).concat(d),{method:"GET"})}},{key:"getUser",value:function(e){return fetch("".concat(p).concat(d).concat(e)).then((function(e){return e.json()}))}},{key:"register",value:function(e){return fetch("".concat(p).concat(d),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}}]),e}(),v=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,[{key:"get",value:function(){return fetch("".concat(p).concat("posts/"))}},{key:"getUserPosts",value:function(e){return fetch("".concat(p,"people/").concat(e,"/").concat("posts/"))}},{key:"set",value:function(e){return fetch("".concat(p).concat("posts/"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}},{key:"update",value:function(e,t){return fetch("".concat(p).concat("posts/").concat(e),{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}},{key:"remove",value:function(e){return fetch("".concat(p).concat("posts/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})}}]),e}(),g=new function e(){Object(u.a)(this,e),this.people=new f,this.posts=new v};var h=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),u=Object(l.a)(o,2),m=u[0],p=u[1];return Object(a.useEffect)((function(){g.people.get().then((function(e){return e.json()})).then((function(e){return c(e)})),g.posts.get().then((function(e){return e.json()})).then((function(e){return p(e)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement(s,{bloggers:n})),r.a.createElement("div",{className:"col-9"},r.a.createElement(i,{posts:m}))))},O=function(e){var t=e.onTabChange;e.bar;return r.a.createElement("div",{className:"container-fluid top"},r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:t.bind(null,"Home"),className:"nav-link"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:t.bind(null,"Login"),className:"nav-link"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:t.bind(null,"Registration"),className:"nav-link"},"Registration")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:t.bind(null,"Workspace"),className:"nav-link"},"Workspace"))))},E=n(2),y=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,null,[{key:"set",value:function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(a){console.log(a)}}},{key:"get",value:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)||null}catch(n){console.log(n)}}},{key:"remove",value:function(e){try{localStorage.removeItem(e)}catch(t){console.log(t)}}}]),e}();function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var N=function(e){var t=e.onTabChange,n=Object(a.useState)({email:"",password:""}),c=Object(l.a)(n,2),o=c[0],i=c[1],s=function(e){var t=e.target,n=t.name,a=t.value;i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,Object(E.a)({},n,a)))};return r.a.createElement("div",{className:"login"},r.a.createElement("h3",null,"Login"),r.a.createElement("div",null,r.a.createElement("input",{onChange:s,name:"email",type:"text",placeholder:"Email"})),r.a.createElement("div",null,r.a.createElement("input",{onChange:s,name:"password",type:"password",placeholder:"Password"})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return function(e){e.email&&e.password?g.people.login(e).then((function(e){return e.ok||alert("WRONG EMAIL or PASSWORD"),e.json()})).then((function(e){localStorage.setItem("LOGIN",e.id),y.set("user",e.userId),t("Workspace")})):alert("Empty fields!!!")}(o)}},"Sign in")))};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var w=function(e){var t=e.onShow,n=e.author,c=Object(a.useState)({title:"",description:""}),o=Object(l.a)(c,2),i=o[0],s=o[1],u=function(e){var t=e.target,n=t.name,a=t.value;s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,Object(E.a)({},n,a)))};return r.a.createElement("div",{className:"myModalBack"},r.a.createElement("div",{className:"myModal"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("button",{onClick:t,type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"recipient-name",className:"control-label"},"Title:"),r.a.createElement("input",{onChange:u,name:"title",value:i.title,type:"text",className:"form-control",id:"recipient-name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"message-text",className:"control-label"},"Description:"),r.a.createElement("textarea",{onChange:u,name:"description",value:i.description,className:"form-control",id:"message-text"})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{onClick:function(e){var a={author:n,description:e.description,personId:y.get("user"),title:e.title};e.title&&e.description?(t(),g.posts.set(a).then((function(e){if(!e.ok)throw new Error;return e.json()})).catch((function(){alert("Invalid data")}))):alert("Please fill in the required fields:")}.bind(null,i),type:"button",className:"postbutton btn btn-primary"},"Add"))))))},S=function(e){var t=Object(a.useState)({}),n=Object(l.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)([]),u=Object(l.a)(s,2),m=u[0],p=u[1],d=Object(a.useState)(!1),b=Object(l.a)(d,2),f=b[0],v=b[1],h=function(){v(!f)};return Object(a.useEffect)((function(){c.id||g.people.getUser(y.get("user")).then((function(e){return o(e)})),c.id&&g.posts.getUserPosts(y.get("user")).then((function(e){return e.json()})).then((function(e){return p(e)}))}),[c,f]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("button",{className:"postbutton create",onClick:h},"Create new post"),!y.get("token")&&r.a.createElement("button",{className:"postbutton",onClick:e.logout},"Logout")),r.a.createElement("div",{className:"workspace"},r.a.createElement(i,{posts:m,buttonOpen:!0,handleRemove:function(e){g.posts.remove(e),p(m.filter((function(t){return t.id!==e})))},handleUpdate:function(e){g.posts.update(e),p(m.filter((function(t){return t.id===e})))}})),f&&r.a.createElement(w,{author:c.username,onShow:h}))};function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var P=function(e){var t=e.onTabChange,n=Object(a.useState)({username:"",lastname:"",email:"",password:""}),c=Object(l.a)(n,2),o=c[0],i=c[1],s=function(e){var t=e.target,n=t.name,a=t.value;i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,Object(E.a)({},n,a)))};return r.a.createElement("div",{className:"container register"},r.a.createElement("h3",null,"Register"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"username",onChange:s,placeholder:"Firstname"})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"lastname",onChange:s,placeholder:"Lastname"})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"email",onChange:s,placeholder:"Email"})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",name:"password",onChange:s,placeholder:"Password"})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){e.username&&e.lastname&&e.email&&e.password&&g.people.register(e).then((function(e){return e.ok?t("Login"):alert("Something went wrong"),e.json()}))}.bind(null,o),type:"submit"},"Sign up")))};n(13);var T=function(){var e=Object(a.useState)({bar:"Home"}),t=Object(l.a)(e,2),n=t[0],c=t[1],o=function(e){c({bar:e})};return r.a.createElement("div",{className:"App"},r.a.createElement(O,{onTabChange:o}),"Home"===n.bar&&r.a.createElement(h,{onTabChange:o}),"Login"===n.bar&&r.a.createElement(N,{onTabChange:o}),"Registration"===n.bar&&r.a.createElement(P,{onTabChange:o}),"Workspace"===n.bar&&r.a.createElement(S,{onTabChange:o,logout:function(){localStorage.removeItem("Login"),c({bar:"Login"})}}))};o.a.render(r.a.createElement(T,null),document.getElementById("root"))},7:function(e,t,n){e.exports=n(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.087699a4.chunk.js.map